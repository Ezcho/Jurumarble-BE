<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
</head>
<body>
<h1>Read Map</h1>
<h2>칸 생성</h2>
ID: <input type="text" id="create-id"><br>
Name: <input type="text" id="create-name"><br>
Description: <input type = "text" id = "crete-description"<br>
<button onclick="createMap()">Create</button>
<h2>모든 칸</h2>
<ul id="maps-list">
</ul>
<button onclick="readMaps()">DB 다시 로드</button>
<h2>칸 업데이트</h2>
ID: <input type="text" id="update-id"><br>
New Name: <input type="text" id="update-name"><br>
New Description <input type="text" id="update-description"><br>
<button onclick="updateMap()">Update</button>
<h2>칸 삭제</h2>
ID: <input type="text" id="delete-id"><br>
<button onclick="deleteMap()">Delete</button>

<script>
  async function createMap() {
    const id = document.getElementById('create-id').value;
    const name = document.getElementById('create-name').value;
    const response = await fetch('/api/maps', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({ id, name })
    });
    readMaps();  // Update map
  }

  async function readMaps() {
    const response = await fetch('/api/maps');
    const data = await response.json();
    const ul = document.getElementById('maps-list');
    ul.innerHTML = '';
    data.forEach(map => {
      const li = document.createElement('li');
      li.textContent = `ID: ${map.id}, Name: ${map.name} Description: ${map.description}`;
      ul.appendChild(li);
    });
  }

  async function updateMap() {
    const id = document.getElementById('update-id').value;
    const name = document.getElementById('update-name').value;
    const description = document.getElementById('update-description').value;

    const response = await fetch(`/api/maps/${id}`, {
      method: 'PUT',
      headers: {
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({ name, description })
    });
    readMaps();
  }

  async function deleteMap() {
    const id = document.getElementById('delete-id').value;
    const response = await fetch(`/api/maps/${id}`, {
      method: 'DELETE'
    });
    readMaps();  // Update
  }

  // Initially load all maps
  readMaps();
</script>
</body>
</html>
